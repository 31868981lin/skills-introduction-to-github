<!DOCTYPE html>
<html>
<head>
    <title>女性历史地位密室逃脱</title>
    <style>
        /* 保持原有样式不变 */
        body { font-family: '微软雅黑', Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
        .page { display: none;
            border: 2px solid #6c5b7b;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); }
        .active-page { display: block;
            animation: fadeIn 0.8s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h1 {
            color: #6c5b7b;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
.drag-box {
            background: #e6e6fa;
            border: 2px solid #9370db;
            padding: 12px 20px;
            margin: 8px;
            border-radius: 25px;
            cursor: move;
            transition: transform 0.2s;
        }
        .drag-box:hover {
            transform: translateY(-3px);
            background: #d8bfd8;
        }
        .drop-zone {
            background: #fff;
            border: 3px dashed #9b59b6;
            min-height: 80px;
            margin: 20px 0;
            padding: 20px;
            border-radius: 15px;
        }
        .progress {
            height: 15px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
.progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #9b59b6, #6c5b7b);
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        button {
            background: #9b59b6;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            display: block;
            margin: 20px auto;
        }
        button:hover {
            background: #6c5b7b;
            transform: scale(1.05);
        }
        #hint {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        /* 其他样式保持不变 */
    </style>
</head>
<body>
    <!-- 保持原有HTML结构不变 -->
    <!-- 首页 -->
    <div id="page0" class="page active-page">
        <h1>♀ 女性历史地位密室逃脱 ♀</h1>
         <div class="game-intro">
            <p>这不是简单的密室逃脱，而是一场穿越时空的社会实验。每一道谜题，都是女性千年抗争的缩影；每一次匹配，都在重构模糊的历史真相。</p>
            <p>当进度条抵达终点，你解锁的不只是游戏成就，更是对性别平等的深层思考。</p>
            <p>🚪 现在，推开历史之门——</p>
            <p>♀ 你的选择，将重写被尘封的叙事。</p>
        </div>
        <div id="hint">
            <div class="progress">
                <div class="progress-bar"></div>
            </div>
        </div>
        <h3>游戏说明：</h3>
        <ul>
            <li>▶ 共3个密室关卡：继承权之谜、婚姻自由之门、社会参与之钥</li>
            <li>▶ 拖动朝代到对应历史描述解开谜题</li>
            <li>▶ 每关需100%正确方可逃脱</li>
        </ul>
        <button onclick="startGame()">开启历史之门</button>
    </div>
    <!-- 关卡页面 -->
    <div id="page1" class="page">
        <h2>🔑 第一密室：继承权之谜</h2>
        <div class="drag-box" draggable="true">周</div>
        <div class="drag-box" draggable="true">汉</div>
        <div class="drag-box" draggable="true">唐</div>
        
        <div class="drop-zone">
            <div class="match-item" data-answer="无女性继承权">继承特征 - 无女性继承权</div>
            <div class="match-item" data-answer="可继承家产">继承特征 - 可继承家产</div>
            <div class="match-item" data-answer="户绝继承制">继承特征 - 户绝继承制</div>
        </div>
        <button onclick="checkAnswer(1)">验证答案</button>
    </div>
 
    <div id="page2" class="page">
        <h2>💍 第二密室：婚姻自由之门</h2>
        <div class="drag-box" draggable="true">宋</div>
        <div class="drag-box" draggable="true">明</div>
        <div class="drag-box" draggable="true">清</div>
        
        <div class="drop-zone">
             <div class="match-item" data-answer="和离制度出现">
            和离制度出现 
        </div>
        <div class="match-item" data-answer="理学束缚加强">
            理学束缚加强 
        </div>
        <div class="match-item" data-answer="七出三不去">
            七出三不去 
        </div>
    </div>
    <button onclick="checkAnswer(2)">验证答案</button>
    
    <!-- 分段落提示系统 -->
    <div class="hint-section">
        <div class="hint-box">
            📜 和离制度说明：
            <div class="hint-content">
                允许夫妻协议离婚，需签订《放妻书》明确财产分割<br>
                ⚖️ 相当于现代《民法典》协议离婚 
            </div>
        </div>
        
        <div class="hint-box">
            ⚖️ 理学束缚解析：
            <div class="hint-content">
                禁止寡妇再婚，限制教育与社会活动<br>
                ✒️ 强调"贞洁"高于生命价值 
            </div>
        </div>
        
        <div class="hint-box">
            📜 七出三不去释义：
            <div class="hint-content">
                    "休妻的七个理由和三种不能休的情况"<br>
                    七出：无子/淫佚/不事舅姑/口舌/盗窃/妒忌/恶疾<br>
                🛡️ 三不去：无娘家/守孝三年/共历贫贱 
            </div>
        </div>
    </div>
</div>
 
<!-- 新增样式 -->
<style>
    .hint-section {
        margin-top: 25px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 12px;
    }
    .hint-box {
        margin: 15px 0;
        padding: 12px;
        background: white;
        border-left: 4px solid #9b59b6;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .hint-content {
        color: #666;
        font-size: 14px;
        line-height: 1.6;
        margin-top: 8px;
    }
</style>
 
    <div id="page3" class="page">
        <h2>👩💼 最终密室：社会参与之钥</h2>
        <div class="drag-box" draggable="true">民国</div>
        <div class="drag-box" draggable="true">新中国</div>
        <div class="drag-box" draggable="true">改革开放</div>
        
        <div class="drop-zone">
            <div class="match-item" data-answer="女子教育合法化">社会进步 - 女子教育合法化</div>
            <div class="match-item" data-answer="同工同酬立法">社会进步 - 同工同酬立法</div>
            <div class="match-item" data-answer="女性参政保障">社会进步 - 女性参政保障</div>
        </div>
        <button onclick="checkAnswer(3)">最终验证</button>
    </div>
 
    <!-- 通关页面 -->
    <div id="page4" class="page">
        <h1>🎉 密室逃脱成功！</h1>
        <p>你已成功解锁所有历史密码！</p>
        <p class="final-question">“若你生于彼时，能否逃脱时代牢笼？”</p>
        <button onclick="resetGame()">再探历史</button>
    </div>

<script>
    let currentPage = 0;
    const correctMap = {
        1: { 周: "无女性继承权", 汉: "可继承家产", 唐: "户绝继承制" },
        2: { 宋: "和离制度出现", 明: "理学束缚加强", 清: "七出三不去" },
        3: { 民国: "女子教育合法化", 新中国: "同工同酬立法", 改革开放: "女性参政保障" }
    };

    // 初始化拖放功能
    function initDragDrop() {
        document.querySelectorAll('.drag-box').forEach(item => {
            item.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', e.target.textContent);
            });
        });

        document.querySelectorAll('.match-item').forEach(zone => {
            zone.addEventListener('dragover', e => e.preventDefault());
            
            zone.addEventListener('drop', e => {
                e.preventDefault();
                const dynasty = e.dataTransfer.getData('text/plain');
                e.target.textContent = `${dynasty} - ${e.target.dataset.answer}`;
                e.target.dataset.matched = dynasty;
            });
        });
    }

    // 页面显示控制
    function showPage(pageNumber) {
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active-page');
        });
        document.getElementById(`page${pageNumber}`).classList.add('active-page');
        updateProgress();
    }

    // 开始游戏
    function startGame() {
        currentPage = 1;
        initDragDrop();
        showPage(currentPage);
    }

    // 验证答案
    function checkAnswer(level) {
        const items = document.querySelectorAll(`#page${level} .match-item`);
        let allCorrect = true;

        items.forEach(item => {
            const dynasty = item.dataset.matched;
            const correctAnswer = correctMap[level][dynasty];
            
            if (correctAnswer === item.dataset.answer) {
                item.classList.add('correct');
                item.classList.remove('wrong');
            } else {
                item.classList.add('wrong');
                item.classList.remove('correct');
                allCorrect = false;
            }
        });

        if (allCorrect) {
            if (level < 3) {
                currentPage = level + 1;
                showPage(currentPage);
            } else {
                showPage(4); // 显示通关页面
            }
        } else {
            alert('存在错误匹配，请重新调整！');
        }
    }

    // 更新进度条
    function updateProgress() {
        const progress = (currentPage / 3) * 100;
        document.querySelector('.progress-bar').style.width = `${progress}%`;
    }

    // 重置游戏
    function resetGame() {
        currentPage = 0;
        document.querySelectorAll('.match-item').forEach(item => {
            item.textContent = item.dataset.answer;
            delete item.dataset.matched;
            item.classList.remove('correct', 'wrong');
        });
        showPage(0);
    }

    // 初始化游戏
    document.addEventListener('DOMContentLoaded', initDragDrop);
</script>
</body>
</html>